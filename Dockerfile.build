FROM rust:1.78-slim

RUN apt-get update && apt-get install -y pkg-config libssl-dev

WORKDIR /build
COPY . .

RUN cargo build --release --bin vectordb-server

# Copy the binary to a predictable location
RUN cp target/release/vectordb-server /vectordb-server-linux